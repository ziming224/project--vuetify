import{v as x,x as y,a8 as h,u as V,j as i,c as w,o as k,a,w as r,P as B,Q as p,z as P,K as s,H as c,aq as S,G as m,E as g,B as C,s as N,F as E,M as T}from"./index-BRcPi2Li.js";import{p as j}from"./product-Di7y1GHd.js";import{b as f}from"./route-block-B_A1xBdJ.js";const q={class:"text-h4 font-weight-bold mb-2"},I={class:"text-body-1 my-6",style:{"white-space":"pre-wrap"}},R={class:"text-h5 font-weight-bold mb-6"},z={class:"d-flex align-center ga-4"},F={__name:"[id]",setup(O){const l=x(),d=y(),u=h(),b=V(),o=i({name:"",price:0,description:"",category:"",sell:!0,image:""});(async()=>{try{const{data:e}=await j.getId(u.params.id);Object.assign(o.value,e.product),document.title=`${e.product.name} | 購物網站`}catch(e){console.error("Error fetching product:",e),l({text:"無法載入商品資料",snackbarProps:{color:"red"}}),d.push("/")}})();const n=i(1),v=async()=>{try{const{data:e}=await T.cart({product:u.params.id,quantity:n.value});b.cartTotal=e.result,l({text:"已加入購物車",snackbarProps:{color:"green"}})}catch(e){console.error("Error adding to cart:",e),l({text:"無法加入購物車",snackbarProps:{color:"red"}}),d.push("/")}};return(e,t)=>(k(),w(E,null,[a(C,null,{default:r(()=>[a(B,null,{default:r(()=>[a(p,{cols:"12",md:"6"},{default:r(()=>[a(P,{class:"rounded-lg",contain:"",height:"500","border-radius":"16",src:o.value.image},null,8,["src"])]),_:1}),a(p,{cols:"12",md:"6"},{default:r(()=>[s("h1",q,c(o.value.name),1),s("p",I,c(o.value.description),1),s("div",R," NT$ "+c(o.value.price.toLocaleString()),1),t[2]||(t[2]=s("p",null,"數量",-1)),s("div",z,[a(S,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=_=>n.value=_),"control-variant":"split",min:1,variant:"outlined",style:{"max-width":"200px"},"hide-details":""},null,8,["modelValue"]),a(m,{size:"large",color:"buttonBackground",disabled:!o.value.sell,"prepend-icon":"mdi-cart-plus",onClick:v},{default:r(()=>t[1]||(t[1]=[g(" 加入購物車 ",-1)])),_:1,__:[1]},8,["disabled"])])]),_:1,__:[2]})]),_:1})]),_:1}),a(N,{class:"align-center justify-center text-center","model-value":!o.value.sell,persistent:"",scrim:"black"},{default:r(()=>[t[4]||(t[4]=s("h1",{class:"text-h2 font-weight-bold mb-4"},"已下架",-1)),t[5]||(t[5]=s("p",{class:"text-h6 mb-8"},"這個商品已經下架，無法購買。",-1)),a(m,{color:"accent",to:"/"},{default:r(()=>t[3]||(t[3]=[g(" 返回首頁 ",-1)])),_:1,__:[3]})]),_:1,__:[4,5]},8,["model-value"])],64))}};typeof f=="function"&&f(F);export{F as default};
