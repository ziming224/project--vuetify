import{v as V,j as h,m as b,q as c,o as n,w as e,a as s,P as f,Q as i,K as a,c as p,S as w,E as m,G as k,aw as S,F as g,h as x,at as L,au as P,H as r,av as E,d as N,e as T,aq as B,W as q,z as $,g as D,B as I}from"./index-DGaisZJo.js";import{o as z}from"./order-BxMqr1WK.js";import{b as v}from"./route-block-B_A1xBdJ.js";const C={key:0,class:"text-center pa-16"},j={class:"font-weight-bold text-mono"},A={class:"font-weight-medium"},F={class:"font-weight-bold text-primary"},M={class:"text-right"},O={class:"font-weight-bold text-body-1 mt-1"},G={class:"d-flex justify-end align-center pa-2"},H={class:"text-h6 font-weight-bold text-primary ml-2"},K={__name:"orders",setup(Q){const y=V(),u=h([]);return b(async()=>{try{const{data:d}=await z.getMy();u.value=d.result.map(t=>{const l=t.cart.reduce((o,_)=>o+_.product.price*_.quantity,0);return{...t,totalPrice:l}})}catch(d){console.error("Error fetching orders:",d),y({text:"無法載入訂單資料",snackbarProps:{color:"red"}})}}),(d,t)=>(n(),c(I,null,{default:e(()=>[s(f,null,{default:e(()=>[s(i,{cols:"12"},{default:e(()=>t[0]||(t[0]=[a("h1",{class:"text-h4 font-weight-bold my-4"},"我的訂單",-1)])),_:1,__:[0]}),s(i,{cols:"12"},{default:e(()=>[u.value.length===0?(n(),p("div",C,[s(w,{size:"80",color:"grey-lighten-1"},{default:e(()=>t[1]||(t[1]=[m("mdi-receipt-text-outline",-1)])),_:1,__:[1]}),t[3]||(t[3]=a("h2",{class:"text-h5 my-4"},"您目前沒有任何訂單",-1)),t[4]||(t[4]=a("p",{class:"text-medium-emphasis mb-6"},"快去商城逛逛吧！",-1)),s(k,{color:"primary",to:"/shop"},{default:e(()=>t[2]||(t[2]=[m("前往商城",-1)])),_:1,__:[2]})])):(n(),c(S,{key:1,variant:"accordion"},{default:e(()=>[(n(!0),p(g,null,x(u.value,l=>(n(),c(L,{key:l._id,elevation:"2"},{default:e(()=>[s(P,null,{default:e(()=>[s(f,{align:"center",class:"spacer"},{default:e(()=>[s(i,{cols:"12",sm:"5",md:"4"},{default:e(()=>[t[5]||(t[5]=a("div",{class:"text-caption text-medium-emphasis"},"訂單編號",-1)),a("div",j,r(l._id),1)]),_:2,__:[5]},1024),s(i,{cols:"6",sm:"3",md:"3"},{default:e(()=>[t[6]||(t[6]=a("div",{class:"text-caption text-medium-emphasis"},"下單日期",-1)),a("div",A,r(new Date(l.createdAt).toLocaleDateString()),1)]),_:2,__:[6]},1024),s(i,{cols:"6",sm:"3",md:"3"},{default:e(()=>[t[7]||(t[7]=a("div",{class:"text-caption text-medium-emphasis"},"總金額",-1)),a("div",F," NT$ "+r(l.totalPrice.toLocaleString()),1)]),_:2,__:[7]},1024)]),_:2},1024)]),_:2},1024),s(E,{class:"bg-surface-light"},{default:e(()=>[s(N,{lines:"two",class:"bg-transparent"},{default:e(()=>[(n(!0),p(g,null,x(l.cart,o=>(n(),c(T,{key:o._id,title:o.product.name,to:`/product/${o.product._id}`,class:"mb-2"},{prepend:e(()=>[s(q,{rounded:"lg",size:"64",class:"mr-4"},{default:e(()=>[s($,{src:o.product.image,alt:o.product.name},null,8,["src","alt"])]),_:2},1024)]),append:e(()=>[a("div",M,[a("div",null,"x "+r(o.quantity),1),a("div",O," NT$ "+r((o.product.price*o.quantity).toLocaleString()),1)])]),default:e(()=>[s(B,null,{default:e(()=>[m(" 單價: NT$ "+r(o.product.price.toLocaleString()),1)]),_:2},1024)]),_:2},1032,["title","to"]))),128))]),_:2},1024),s(D,{class:"my-2"}),a("div",G,[t[8]||(t[8]=a("span",{class:"text-h6 font-weight-bold"},"總計：",-1)),a("span",H,"NT$ "+r(l.totalPrice.toLocaleString()),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1}))}};typeof v=="function"&&v(K);export{K as default};
