import{v as V,y as h,a9 as w,u as B,j as b,c as C,o as c,a as e,w as r,P as N,Q as f,W as P,C as a,I as u,aB as S,q as v,as as I,f as E,H as n,E as m,B as R,s as T,F as j,N as q}from"./index-CgVb7Qfs.js";import{p as z}from"./product-ufwgmITs.js";import{b as x}from"./route-block-B_A1xBdJ.js";const F={class:"text-h4 font-weight-bold mb-2"},L={class:"d-flex align-center mb-4"},O={class:"text-body-1 my-6",style:{"white-space":"pre-wrap"}},U={class:"text-h5 font-weight-bold mb-6"},$={class:"d-flex align-center ga-4"},D={class:"mt-6"},H={__name:"[id]",setup(M){const i=V(),y=h(),p=w(),g=B(),l=b({name:"",price:0,description:"",category:"",sell:!0,image:""});(async()=>{try{const{data:o}=await z.getId(p.params.id);Object.assign(l.value,o.product),document.title=`${o.product.name} | 購物網站`}catch(o){console.error("Error fetching product:",o),i({text:"無法載入商品資料",snackbarProps:{color:"red"}}),y.push("/")}})();const d=b(1),_=async()=>{var o,t;try{const{data:s}=await q.cart({product:p.params.id,quantity:d.value});g.cartTotal=s.result,i({text:"已加入購物車",snackbarProps:{color:"green"}})}catch(s){const k=((t=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:t.message)||"無法加入購物車，請稍後再試";console.error("Error adding to cart:",s),i({text:k,snackbarProps:{color:"red"}})}};return(o,t)=>(c(),C(j,null,[e(R,{style:{"margin-top":"50px","margin-bottom":"50px"}},{default:r(()=>[e(N,null,{default:r(()=>[e(f,{cols:"12",md:"6"},{default:r(()=>[e(P,{"border-radius":"16",class:"rounded-lg",contain:"",height:"500",src:l.value.image},null,8,["src"])]),_:1}),e(f,{cols:"12",md:"6"},{default:r(()=>[a("h1",F,u(l.value.name),1),a("div",L,[e(S,{color:"amber",density:"compact","half-increments":"","model-value":4.5,readonly:"",size:"small"}),t[1]||(t[1]=a("div",{class:"text-grey ms-2"},"4.5 (413)",-1))]),a("p",O,u(l.value.description),1),a("div",U," NT$ "+u(l.value.price.toLocaleString()),1),t[5]||(t[5]=a("p",null,"數量",-1)),a("div",$,[e(I,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),"control-variant":"split","hide-details":"",min:1,style:{"max-width":"200px"},variant:"outlined"},null,8,["modelValue"]),E(g).isLoggedIn?(c(),v(n,{key:0,color:"buttonBackground",disabled:!l.value.sell,"prepend-icon":"mdi-cart-plus",size:"large",onClick:_},{default:r(()=>t[2]||(t[2]=[m(" 加入購物車 ",-1)])),_:1,__:[2]},8,["disabled"])):(c(),v(n,{key:1,color:"buttonBackground","prepend-icon":"mdi-login",size:"large",to:"/auth"},{default:r(()=>t[3]||(t[3]=[m(" 請先登入 ",-1)])),_:1,__:[3]}))]),a("div",D,[t[4]||(t[4]=a("p",{class:"text-subtitle-1 font-weight-bold"},"分享給朋友",-1)),e(n,{color:"blue-darken-2",icon:"mdi-facebook",variant:"text"}),e(n,{color:"blue-lighten-1",icon:"mdi-twitter",variant:"text"}),e(n,{color:"purple-lighten-1",icon:"mdi-instagram",variant:"text"})])]),_:1,__:[5]})]),_:1})]),_:1}),e(T,{class:"align-center justify-center text-center","model-value":!l.value.sell,persistent:"",scrim:"black"},{default:r(()=>[t[7]||(t[7]=a("h1",{class:"text-h2 font-weight-bold mb-4"},"已下架",-1)),t[8]||(t[8]=a("p",{class:"text-h6 mb-8"},"這個商品已經下架，無法購買。",-1)),e(n,{color:"accent",to:"/"},{default:r(()=>t[6]||(t[6]=[m(" 返回首頁 ",-1)])),_:1,__:[6]})]),_:1,__:[7,8]},8,["model-value"])],64))}};typeof x=="function"&&x(H);export{H as default};
