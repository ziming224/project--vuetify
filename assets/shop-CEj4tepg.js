import{g as w,S as O}from"./ScrollTrigger-CUwdeFQJ.js";import{j as d,m as R,c as _,o as u,a as t,w as o,C as r,I as c,W as F,y as G,u as H,q as S,$ as ee,aC as te,E as l,a3 as q,g as j,a7 as z,G as W,H as C,a2 as ae,R as Q,v as oe,k as L,aD as se,f as re,P as V,Q as p,S as le,a8 as ne,aE as ie,ar as B,F as k,h as E,a0 as ce,aF as de,d as ue,e as me,ap as fe,aG as M,aH as pe,aI as ge,B as ve,N as _e}from"./index-DLV7ke6Q.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{p as ye}from"./product-BbsswFb5.js";import{b as N}from"./route-block-B_A1xBdJ.js";const xe=""+new URL("dog-face-BvL0_U8h.jpg",import.meta.url).href,he={class:"hero-text"},be={class:"text-h2 font-weight-bold"},Ve={class:"text-h5 font-weight-bold"},ke={__name:"HeroSection",props:{imageSrc:{type:String,required:!0},title:{type:String,default:"公益商城"},subtitle:{type:String,default:"每月與不同單位合作您下的一筆訂單能讓毛孩們多一份溫飽"}},setup(n){const m=d(null);return R(()=>{w.registerPlugin(O);const i=m.value;w.fromTo(i,{scale:1,y:0},{scale:.5,y:-200,transformOrigin:"top center",scrollTrigger:{trigger:i,start:"top top",end:"bottom top",scrub:!0,pin:!0,pinSpacing:!1}})}),(i,y)=>(u(),_("div",{ref_key:"heroSection",ref:m,class:"hero-section"},[t(F,{class:"hero-img",cover:"",src:n.imageSrc},{default:o(()=>[r("div",he,[r("h1",be,c(n.title),1),r("p",Ve,c(n.subtitle),1)])]),_:1},8,["src"])],512))}},Se=D(ke,[["__scopeId","data-v-8cd66faa"]]),Ce={class:"text-h6 font-weight-bold text-secondary my-2"},we={class:"text-body-2 product-description"},Te={__name:"ProductCard",props:["_id","image","name","category","price","description"],emits:["add-to-cart"],setup(n,{emit:m}){const i=n,y=m,g=G();H();const T=()=>{y("add-to-cart")},P=()=>{g.push("/product/"+i._id)};return($,x)=>(u(),S(Q,{class:"d-flex flex-column product-card",height:"100%",hover:"",name:"",onClick:P},{default:o(()=>[t(F,{class:"text-white align-end",cover:"",height:"450",src:n.image},{default:o(()=>[t(ee,{color:"rgba(0, 0, 0, 0.4)",theme:"dark"},{default:o(()=>[t(te,{class:"text-body-1 font-weight-bold"},{default:o(()=>[l(c(n.name),1)]),_:1})]),_:1})]),_:1},8,["src"]),t(q,{class:"pt-4 flex-grow-1"},{default:o(()=>[r("div",Ce," NT$ "+c(n.price.toLocaleString()),1),r("div",we,c(n.description),1)]),_:1}),t(j),t(z,{class:"pa-3"},{default:o(()=>[t(W),t(C,{color:"secondary","prepend-icon":"mdi-cart-plus",text:"加入購物車",variant:"tonal",onClick:ae(T,["prevent"])})]),_:1})]),_:1}))}},Pe=D(Te,[["__scopeId","data-v-f3898a6b"]]),$e={class:"announcement-fab-container"},Ae={class:"mb-4 text-h5 text-md-h4 font-weight-bold"},Ie={class:"text-secondary"},Le={class:"text-medium-emphasis mb-0"},U=9,J={__name:"shop",setup(n){const m=d({name:"浪浪狗狗之家",description:"致力於救援與照顧流浪動物"}),i=d(!1),y=d(null),g=oe(),T=H(),P=G(),$=d([]),x=L(()=>$.value.filter(s=>{const a=s.name.toLowerCase().includes(A.value.toLowerCase()),e=h.value?s.category===h.value:!0;return a&&e}).sort((s,a)=>{const e=I[b.value];return e.key==="createdAt"||e.key==="updatedAt"?e.direction*(new Date(s[e.key])-new Date(a[e.key])):e.direction*(s[e.key]>a[e.key]?1:-1)})),f=d(1),K=L(()=>Math.ceil(x.value.length/U)),X=L(()=>x.value.slice((f.value-1)*U,f.value*U)),A=d(""),h=d(""),Y=["貓用","犬用"],b=d(0),I=[{text:"名稱",key:"name",direction:1},{text:"價格：低到高",key:"price",direction:1},{text:"價格：高到低",key:"price",direction:-1},{text:"最新商品",key:"createdAt",direction:-1},{text:"最舊商品",key:"createdAt",direction:1}];(async()=>{try{const{data:s}=await ye.get();$.value=s.products}catch(s){console.error("Error fetching products:",s),g({text:"無法載入商品資料",snackbarProps:{color:"red"}})}})();const Z=async s=>{var a,e;if(!T.isLogin){P.push("/auth");return}try{await _e.cart({product:s,quantity:1}),g({text:"已加入購物車",snackbarProps:{color:"success"}})}catch(v){g({text:((e=(a=v.response)==null?void 0:a.data)==null?void 0:e.message)||"加入購物車失敗",snackbarProps:{color:"red"}})}};return w.registerPlugin(O),R(()=>{window.scrollTo(0,0);const s=y.value,a=w.fromTo(s,{scale:1,y:0},{scale:.5,y:-200,transformOrigin:"top center",scrollTrigger:{trigger:s,start:"top top",end:"bottom top",scrub:!0,pin:!0,pinSpacing:!1}});se(()=>{var e;(e=a.scrollTrigger)==null||e.kill()})}),(s,a)=>(u(),_(k,null,[t(Se,{"image-src":re(xe),subtitle:"每月與不同單位合作您下的一筆訂單能讓毛孩們多一份溫飽",title:"公益商城"},null,8,["image-src"]),r("div",$e,[a[8]||(a[8]=r("div",{class:"fab-tip"},"點擊查看本月合作單位",-1)),t(C,{class:"announcement-fab",color:"#EDA35A",elevation:"8",icon:"mdi-bullhorn-outline",size:"x-large",onClick:a[0]||(a[0]=e=>i.value=!0)})]),t(ne,{modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=e=>i.value=e),"max-width":"800px"},{default:o(()=>[t(Q,{class:"announcement-card-dialog"},{default:o(()=>[t(q,{class:"pa-8"},{default:o(()=>[t(V,{align:"center","no-gutters":""},{default:o(()=>[t(p,{class:"text-center mb-4 mb-sm-0",cols:"12",sm:"3"},{default:o(()=>[t(le,{color:"secondary",size:"80"},{default:o(()=>a[9]||(a[9]=[l("mdi-bullhorn",-1)])),_:1,__:[9]})]),_:1}),t(p,{cols:"12",sm:"9"},{default:o(()=>[r("h2",Ae,[a[10]||(a[10]=l("💝 本月商品將捐贈給 ",-1)),r("strong",Ie,c(m.value.name),1)]),a[11]||(a[11]=r("p",{class:"text-body-1"},[l(" 在本賣場消費之商品都會捐贈與該月合作單位，每月合作對象以公告單位為準。"),r("br"),l(" 這是一個讓愛不流浪的機會。您的每一筆消費，都將直接轉化為浪浪們的伙食、醫療與棲身之所。讓牠們不再於街頭流浪，而是能擁有一個充滿愛與希望的家。"),r("br"),l(" 讓我們一起，用行動來支持這些無助的生命。您的消費，是浪浪們重獲新生的希望。"),r("br"),l(" 感謝您的每一次善舉，讓愛的力量，在我們的世界裡循環不息。"),r("br")],-1)),r("p",Le,c(m.value.description),1)]),_:1,__:[11]})]),_:1})]),_:1}),t(z,{class:"pa-4"},{default:o(()=>[t(W),t(C,{color:"secondary",variant:"text",onClick:a[1]||(a[1]=e=>i.value=!1)},{default:o(()=>a[12]||(a[12]=[l(" 我知道了 ",-1)])),_:1,__:[12]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ve,{class:"my-8 custom-container"},{default:o(()=>[t(V,{align:"center",class:"mb-4"},{default:o(()=>[t(p,{cols:"12",md:"8"},{default:o(()=>[t(ie,{modelValue:h.value,"onUpdate:modelValue":[a[3]||(a[3]=e=>h.value=e),a[4]||(a[4]=e=>f.value=1)],mandatory:"","selected-class":"text-secondary"},{default:o(()=>[t(B,{filter:"",value:"",variant:"outlined"},{default:o(()=>a[13]||(a[13]=[l(" 全部 ",-1)])),_:1,__:[13]}),(u(),_(k,null,E(Y,e=>t(B,{key:e,filter:"",value:e,variant:"outlined"},{default:o(()=>[l(c(e),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(p,{class:"d-flex align-center",cols:"12",md:"4"},{default:o(()=>[t(ce,{modelValue:A.value,"onUpdate:modelValue":[a[5]||(a[5]=e=>A.value=e),a[6]||(a[6]=e=>f.value=1)],class:"mr-2",clearable:"",density:"compact",flat:"","hide-details":"",placeholder:"搜尋商品","prepend-inner-icon":"mdi-magnify",variant:"solo-filled"},null,8,["modelValue"]),t(de,null,{activator:o(({props:e})=>[t(C,M(e,{icon:"mdi-sort",ripple:!1,variant:"text"}),null,16),l(" "+c(I[b.value].text),1)]),default:o(()=>[t(ue,null,{default:o(()=>[(u(),_(k,null,E(I,(e,v)=>t(me,{key:e.text,active:b.value===v,onClick:Ue=>{b.value=v,f.value=1}},{default:o(()=>[t(fe,null,{default:o(()=>[l(c(e.text),1)]),_:2},1024)]),_:2},1032,["active","onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),t(j,{class:"mb-8"}),x.value.length>0?(u(),S(V,{key:0},{default:o(()=>[(u(!0),_(k,null,E(X.value,e=>(u(),S(p,{key:e._id,cols:"12",lg:"4",md:"6"},{default:o(()=>[t(Pe,M({ref_for:!0},e,{onAddToCart:v=>Z(e._id)}),null,16,["onAddToCart"])]),_:2},1024))),128)),t(p,{cols:"12"},{default:o(()=>[t(pe,{modelValue:f.value,"onUpdate:modelValue":a[7]||(a[7]=e=>f.value=e),circle:"",length:K.value,"total-visible":5},null,8,["modelValue","length"])]),_:1})]),_:1})):(u(),S(V,{key:1},{default:o(()=>[t(p,{cols:"12"},{default:o(()=>[t(ge,{headline:"噢！找不到商品",icon:"mdi-magnify-remove-outline",text:"試試看更換篩選條件或關鍵字吧！",title:"無符合條件的商品"})]),_:1})]),_:1}))]),_:1})],64))}};typeof N=="function"&&N(J);const Re=D(J,[["__scopeId","data-v-06f87d1b"]]);export{Re as default};
