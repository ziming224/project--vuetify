import{u as V,v as b,j as u,c as x,o as g,C as m,a as s,w as c,a0 as p,H as y,E as F,a2 as k,a1 as w,F as B,N}from"./index-CR_kg9bL.js";const S={class:"text-center"},P={__name:"profile",setup(U){const r=V(),i=b(),o=u(!1),n=u(!1),t=u({account:r.account,email:r.email}),d={required:l=>!!l||"此欄位為必填",email:l=>/.+@.+\..+/.test(l)||"信箱格式不正確"},v=async()=>{var l,e;if(o.value){n.value=!0;try{await N.updateProfile({email:t.value.email}),r.email=t.value.email,i({text:"個人資料更新成功！",snackbarProps:{color:"success",location:"top"}})}catch(a){console.error("更新個人資料失敗",a);const f=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"更新失敗，請稍後再試";i({text:f,snackbarProps:{color:"error",location:"top"}})}finally{n.value=!1}}};return(l,e)=>(g(),x(B,null,[e[4]||(e[4]=m("h2",{class:"text-h5 font-weight-bold mb-4"},"個人資料",-1)),s(w,{modelValue:o.value,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value=a),onSubmit:k(v,["prevent"])},{default:c(()=>[s(p,{modelValue:t.value.account,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.account=a),class:"mb-4",disabled:"",label:"帳號",readonly:"",variant:"outlined"},null,8,["modelValue"]),s(p,{modelValue:t.value.email,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.email=a),class:"mb-4",label:"信箱",rules:[d.required,d.email],type:"email",variant:"outlined"},null,8,["modelValue","rules"]),m("div",S,[s(y,{color:"tea",disabled:!o.value,loading:n.value,type:"submit"},{default:c(()=>e[3]||(e[3]=[F(" 儲存更新 ",-1)])),_:1,__:[3]},8,["disabled","loading"])])]),_:1},8,["modelValue"])],64))}};export{P as default};
