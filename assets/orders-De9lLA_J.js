import{v as y,j as b,m as V,c as d,o as l,K as s,q as u,a,w as e,E as p,S as h,G as w,F as f,h as g,at as k,au as S,P as L,Q as m,H as n,av as P,d as E,e as N,aq as T,W as q,z as B,aw as I}from"./index-DGaisZJo.js";import{o as $}from"./order-BxMqr1WK.js";import{b as x}from"./route-block-B_A1xBdJ.js";const z={key:0,class:"text-center pa-8"},D={class:"font-weight-bold text-mono"},A={class:"font-weight-medium"},C={class:"font-weight-bold text-primary text-h6"},F={class:"text-right"},M={class:"font-weight-bold text-body-1 mt-1"},O={__name:"orders",setup(j){const v=y(),c=b([]);return V(async()=>{try{const{data:i}=await $.getMy();c.value=i.result.map(t=>{const r=t.cart.reduce((o,_)=>o+_.product.price*_.quantity,0);return{...t,totalPrice:r}})}catch(i){console.error("Error fetching orders:",i),v({text:"無法載入訂單資料",snackbarProps:{color:"red"}})}}),(i,t)=>(l(),d("div",null,[t[7]||(t[7]=s("h2",{class:"text-h5 font-weight-bold mb-6"},"我的訂單",-1)),c.value.length===0?(l(),d("div",z,[a(h,{size:"64",color:"grey-lighten-1"},{default:e(()=>t[0]||(t[0]=[p("mdi-receipt-text-outline",-1)])),_:1,__:[0]}),t[2]||(t[2]=s("h3",{class:"text-h6 my-4"},"您目前沒有任何訂單",-1)),t[3]||(t[3]=s("p",{class:"text-medium-emphasis mb-6"},"快去商城逛逛吧！",-1)),a(w,{color:"primary",to:"/shop"},{default:e(()=>t[1]||(t[1]=[p("前往商城",-1)])),_:1,__:[1]})])):(l(),u(I,{key:1,variant:"accordion"},{default:e(()=>[(l(!0),d(f,null,g(c.value,r=>(l(),u(k,{key:r._id,elevation:"0",class:"border mb-4"},{default:e(()=>[a(S,{class:"py-3"},{default:e(()=>[a(L,{align:"center",class:"spacer"},{default:e(()=>[a(m,{cols:"12",sm:"5",md:"4"},{default:e(()=>[t[4]||(t[4]=s("div",{class:"text-caption text-medium-emphasis"},"訂單編號",-1)),s("div",D,n(r._id),1)]),_:2,__:[4]},1024),a(m,{cols:"6",sm:"4",md:"4"},{default:e(()=>[t[5]||(t[5]=s("div",{class:"text-caption text-medium-emphasis"},"下單日期",-1)),s("div",A,n(new Date(r.createdAt).toLocaleDateString()),1)]),_:2,__:[5]},1024),a(m,{cols:"6",sm:"3",md:"4"},{default:e(()=>[t[6]||(t[6]=s("div",{class:"text-caption text-medium-emphasis"},"總金額",-1)),s("div",C," NT$ "+n(r.totalPrice.toLocaleString()),1)]),_:2,__:[6]},1024)]),_:2},1024)]),_:2},1024),a(P,{class:"bg-grey-lighten-5"},{default:e(()=>[a(E,{lines:"two",class:"bg-transparent"},{default:e(()=>[(l(!0),d(f,null,g(r.cart,o=>(l(),u(N,{key:o._id,title:o.product.name,to:`/product/${o.product._id}`,class:"mb-2"},{prepend:e(()=>[a(q,{rounded:"lg",size:"64",class:"mr-4"},{default:e(()=>[a(B,{src:o.product.image,alt:o.product.name},null,8,["src","alt"])]),_:2},1024)]),append:e(()=>[s("div",F,[s("div",null,"x "+n(o.quantity),1),s("div",M," NT$ "+n((o.product.price*o.quantity).toLocaleString()),1)])]),default:e(()=>[a(T,null,{default:e(()=>[p(" 單價: NT$ "+n(o.product.price.toLocaleString()),1)]),_:2},1024)]),_:2},1032,["title","to"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]))}};typeof x=="function"&&x(O);export{O as default};
