import{y,j as b,m as V,c as d,o as l,E as s,v as u,a,w as e,H as p,U as h,J as w,F as f,h as g,az as k,aA as S,R as L,S as m,K as n,aB as E,d as P,e as B,as as N,Z as T,Y as I,aC as $}from"./index-DK2avGV5.js";import{o as q}from"./order-DtEpwykP.js";import{b as x}from"./route-block-B_A1xBdJ.js";const z={key:0,class:"text-center pa-8"},A={class:"font-weight-bold text-mono"},C={class:"font-weight-medium"},D={class:"font-weight-bold text-secondary text-h6"},F={class:"text-right"},M={class:"font-weight-bold text-body-1 mt-1"},O={__name:"orders",setup(R){const v=y(),c=b([]);return V(async()=>{try{const{data:i}=await q.getMy();c.value=i.result.map(t=>{const r=t.cart.reduce((o,_)=>o+_.product.price*_.quantity,0);return{...t,totalPrice:r}})}catch(i){console.error("Error fetching orders:",i),v({text:"無法載入訂單資料",snackbarProps:{color:"red"}})}}),(i,t)=>(l(),d("div",null,[t[7]||(t[7]=s("h2",{class:"text-h5 font-weight-bold mb-6"},"我的訂單",-1)),c.value.length===0?(l(),d("div",z,[a(h,{color:"grey-lighten-1",size:"64"},{default:e(()=>t[0]||(t[0]=[p("mdi-receipt-text-outline",-1)])),_:1,__:[0]}),t[2]||(t[2]=s("h3",{class:"text-h6 my-4"},"您目前沒有任何訂單",-1)),t[3]||(t[3]=s("p",{class:"text-medium-emphasis mb-6"},"快去商城逛逛吧！",-1)),a(w,{color:"tea",to:"/shop"},{default:e(()=>t[1]||(t[1]=[p("前往商城",-1)])),_:1,__:[1]})])):(l(),u($,{key:1,variant:"accordion"},{default:e(()=>[(l(!0),d(f,null,g(c.value,r=>(l(),u(k,{key:r._id,class:"border mb-4",elevation:"0"},{default:e(()=>[a(S,{class:"py-3"},{default:e(()=>[a(L,{align:"center",class:"spacer"},{default:e(()=>[a(m,{cols:"12",md:"4",sm:"5"},{default:e(()=>[t[4]||(t[4]=s("div",{class:"text-caption text-medium-emphasis"},"訂單編號",-1)),s("div",A,n(r._id),1)]),_:2,__:[4]},1024),a(m,{cols:"6",md:"4",sm:"4"},{default:e(()=>[t[5]||(t[5]=s("div",{class:"text-caption text-medium-emphasis"},"下單日期",-1)),s("div",C,n(new Date(r.createdAt).toLocaleDateString()),1)]),_:2,__:[5]},1024),a(m,{cols:"6",md:"4",sm:"3"},{default:e(()=>[t[6]||(t[6]=s("div",{class:"text-caption text-medium-emphasis"},"總金額",-1)),s("div",D," NT$ "+n(r.totalPrice.toLocaleString()),1)]),_:2,__:[6]},1024)]),_:2},1024)]),_:2},1024),a(E,{class:"bg-grey-lighten-5"},{default:e(()=>[a(P,{class:"bg-transparent",lines:"two"},{default:e(()=>[(l(!0),d(f,null,g(r.cart,o=>(l(),u(B,{key:o._id,class:"mb-2",title:o.product.name,to:`/product/${o.product._id}`},{prepend:e(()=>[a(T,{class:"mr-4",rounded:"lg",size:"64"},{default:e(()=>[a(I,{alt:o.product.name,src:o.product.image},null,8,["alt","src"])]),_:2},1024)]),append:e(()=>[s("div",F,[s("div",null,"x "+n(o.quantity),1),s("div",M," NT$ "+n((o.product.price*o.quantity).toLocaleString()),1)])]),default:e(()=>[a(N,null,{default:e(()=>[p(" 單價: NT$ "+n(o.product.price.toLocaleString()),1)]),_:2},1024)]),_:2},1032,["title","to"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]))}};typeof x=="function"&&x(O);export{O as default};
