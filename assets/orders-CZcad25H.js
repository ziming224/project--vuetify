import{y,j as k,v as m,o as l,w as t,a as r,R as g,S as n,E as i,g as v,_ as b,c as u,F as h,h as V,K as d,D as x}from"./index-CLCoYM-R.js";import{o as D}from"./order-_Cq6F--z.js";import{b as f}from"./route-block-B_A1xBdJ.js";const w={__name:"orders",setup(S){const _=y(),c=k([]),p=[{title:"ID",key:"_id"},{title:"日期",key:"createdAt",value:e=>new Date(e.createdAt).toLocaleString()},{title:"使用者",key:"user",value:e=>e.user.account},{title:"商品",key:"cart",sortable:!1},{title:"救援單位",key:"org",sortable:!1},{title:"總金額",key:"totalPrice",value:e=>e.cart.reduce((a,s)=>a+s.product.price*s.quantity,0)}];return(async()=>{try{const{data:e}=await D.getAll();c.value=e.result}catch(e){console.error("Error fetching orders:",e),_({text:"無法載入訂單資料",snackbarProps:{color:"red"}})}})(),(e,a)=>(l(),m(x,null,{default:t(()=>[r(g,null,{default:t(()=>[r(n,{cols:"12"},{default:t(()=>a[0]||(a[0]=[i("h1",{class:"text-h4 text-center"},"訂單管理",-1)])),_:1,__:[0]}),r(v),r(n,{cols:"12"},{default:t(()=>[r(b,{headers:p,items:c.value},{"item.cart":t(({value:s})=>[i("ul",null,[(l(!0),u(h,null,V(s,o=>(l(),u("li",{key:o._id},d(o.product.name)+" - "+d(o.quantity)+" 件 ",1))),128))])]),_:2},1032,["items"])]),_:1})]),_:1})]),_:1}))}};typeof f=="function"&&f(w);export{w as default};
