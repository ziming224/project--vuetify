import{v as b,x,a7 as k,u as w,j as p,c as P,o as h,a,w as o,O as B,P as n,M as s,H as l,g as m,z as C,ap as S,G as v,E as f,B as E,s as N,F as I,K as R}from"./index-D5ZAoQpQ.js";import{p as T}from"./product-Cm0oVEzf.js";import{b as g}from"./route-block-B_A1xBdJ.js";const j={class:"text-center"},q={style:{"white-space":"pre"}},D={__name:"[id]",setup(F){const c=b(),i=x(),d=k(),y=w(),t=p({name:"",price:0,description:"",category:"",sell:!0,image:""});(async()=>{try{const{data:e}=await T.getId(d.params.id);t.value.name=e.product.name,t.value.price=e.product.price,t.value.description=e.product.description,t.value.category=e.product.category,t.value.sell=e.product.sell,t.value.image=e.product.image,document.title=`${e.product.name} | 購物網站`}catch(e){console.error("Error fetching products:",e),c({text:"無法載入商品資料",snackbarProps:{color:"red"}}),i.push("/")}})();const u=p(1),_=async()=>{try{const{data:e}=await R.cart({product:d.params.id,quantity:u.value});y.cartTotal=e.result,c({text:"已加入購物車",snackbarProps:{color:"green"}})}catch(e){console.error("Error fetching products:",e),c({text:"無法加入購物車",snackbarProps:{color:"red"}}),i.push("/")}};return(e,r)=>(h(),P(I,null,[a(E,null,{default:o(()=>[a(B,null,{default:o(()=>[a(n,{cols:"12"},{default:o(()=>[s("h1",j,l(t.value.name),1)]),_:1}),a(m),a(n,{cols:"12",md:"6"},{default:o(()=>[a(C,{class:"mb-4",contain:"",height:"400",src:t.value.image},null,8,["src"])]),_:1}),a(n,{cols:"12",md:"6"},{default:o(()=>[s("p",null,"分類: "+l(t.value.category),1),s("p",null,"價格: "+l(t.value.price),1),a(m,{class:"my-5"}),s("p",q,l(t.value.description),1),a(S,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=V=>u.value=V),"control-variant":"split",min:1,variant:"outlined"},null,8,["modelValue"]),a(v,{class:"mt-4",color:"primary",disabled:!t.value.sell,onClick:_},{default:o(()=>r[1]||(r[1]=[f(" 加入購物車 ",-1)])),_:1,__:[1]},8,["disabled"])]),_:1})]),_:1})]),_:1}),a(N,{class:"align-center justify-center text-center","model-value":!t.value.sell,opacity:"0.7",persistent:"",scrim:"black"},{default:o(()=>[r[3]||(r[3]=s("h1",null,"已下架",-1)),r[4]||(r[4]=s("p",null,"這個商品已經下架，無法購買。",-1)),a(v,{color:"primary",to:"/"},{default:o(()=>r[2]||(r[2]=[f(" 返回首頁 ",-1)])),_:1,__:[2]})]),_:1,__:[3,4]},8,["model-value"])],64))}};typeof g=="function"&&g(D);export{D as default};
