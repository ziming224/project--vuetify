import{g as P,S as D}from"./ScrollTrigger-CUwdeFQJ.js";import{j as d,m as N,c as h,o as i,a as e,w as a,K as s,H as n,z as j,x as q,u as z,q as C,_ as X,a9 as Y,E as f,a2 as Z,g as F,a6 as ee,A as te,G,a1 as ae,R as H,v as re,k as A,f as oe,P as y,Q as u,S as se,B as U,aw as le,ax as M,F as S,h as L,$ as ne,ay as ie,d as ce,e as ue,ao as de,az as O,aA as me,aB as pe,M as fe}from"./index-C9W7BD91.js";/* empty css                                                                    */import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{p as ge}from"./product-D7o0ofJM.js";import{b as R}from"./route-block-B_A1xBdJ.js";const ve={class:"hero-text"},_e={class:"text-h3 font-weight-bold"},ye={class:"text-subtitle-1"},he={__name:"HeroSection",props:{imageSrc:{type:String,required:!0},title:{type:String,default:"公益商城"},subtitle:{type:String,default:"您的每一次消費，都在為毛孩們累積幸福"}},setup(l){const m=d(null);return N(()=>{P.registerPlugin(D);const p=m.value;P.fromTo(p,{scale:1,y:0},{scale:.5,y:-200,transformOrigin:"top center",scrollTrigger:{trigger:p,start:"top top",end:"bottom top",scrub:!0,pin:!0,pinSpacing:!1}})}),(p,g)=>(i(),h("div",{ref_key:"heroSection",ref:m,class:"hero-section"},[e(j,{class:"hero-img",cover:"",src:l.imageSrc},{default:a(()=>[s("div",ve,[s("h1",_e,n(l.title),1),s("p",ye,n(l.subtitle),1)])]),_:1},8,["src"])],512))}},xe=B(he,[["__scopeId","data-v-6f5c9eb5"]]),Ve=""+new URL("dog-face-BvL0_U8h.jpg",import.meta.url).href,be={class:"text-subtitle-1 font-weight-medium text-medium-emphasis"},ke={class:"text-h6 font-weight-bold text-primary my-2"},Se={class:"text-body-2 product-description"},Ce={__name:"ProductCard",props:["_id","image","name","category","price","description"],emits:["add-to-cart"],setup(l,{emit:m}){const p=l,g=m,x=q(),T=z(),V=()=>{g("add-to-cart")},v=()=>{T.isLogin?x.push(`/product/${p._id}`):x.push("/auth")};return(c,E)=>(i(),C(H,{class:"d-flex flex-column product-card",height:"100%",hover:"",name:"",onClick:v},{default:a(()=>[e(j,{class:"text-white align-end",cover:"",height:"550",src:l.image},{default:a(()=>[e(X,{color:"rgba(0, 0, 0, 0.4)",theme:"dark"},{default:a(()=>[e(Y,{class:"text-body-1 font-weight-bold"},{default:a(()=>[f(n(l.name),1)]),_:1})]),_:1})]),_:1},8,["src"]),e(Z,{class:"pt-4 flex-grow-1"},{default:a(()=>[s("div",be,n(l.category),1),s("div",ke," NT$ "+n(l.price.toLocaleString()),1),s("div",Se,n(l.description),1)]),_:1}),e(F),e(ee,{class:"pa-3"},{default:a(()=>[e(te),e(G,{color:"primary","prepend-icon":"mdi-cart-plus",text:"加入購物車",variant:"tonal",onClick:ae(V,["prevent"])})]),_:1})]),_:1}))}},Pe=B(Ce,[["__scopeId","data-v-3e7995ac"]]),Te={class:"mb-1 text-h6"},we={class:"text-grey"},I=9,K={__name:"shop",setup(l){const m=d({name:"浪浪狗狗之家",description:"致力於救援與照顧流浪動物"}),p=d(null),g=re(),x=z(),T=q(),V=d([]),v=A(()=>V.value.filter(o=>{const r=o.name.toLowerCase().includes(w.value.toLowerCase()),t=b.value?o.category===b.value:!0;return r&&t}).sort((o,r)=>{const t=$[k.value];return t.key==="createdAt"||t.key==="updatedAt"?t.direction*(new Date(o[t.key])-new Date(r[t.key])):t.direction*(o[t.key]>r[t.key]?1:-1)})),c=d(1),E=A(()=>Math.ceil(v.value.length/I)),Q=A(()=>v.value.slice((c.value-1)*I,c.value*I)),w=d(""),b=d(""),W=["貓用","狗用"],k=d(0),$=[{text:"名稱",key:"name",direction:1},{text:"價格：低到高",key:"price",direction:1},{text:"價格：高到低",key:"price",direction:-1},{text:"最新商品",key:"createdAt",direction:-1},{text:"最舊商品",key:"createdAt",direction:1}];(async()=>{try{const{data:o}=await ge.get();V.value=o.products}catch(o){console.error("Error fetching products:",o),g({text:"無法載入商品資料",snackbarProps:{color:"red"}})}})();const J=async o=>{var r,t;if(!x.isLogin){T.push("/auth");return}try{await fe.cart({product:o,quantity:1}),g({text:"已加入購物車",snackbarProps:{color:"success"}})}catch(_){g({text:((t=(r=_.response)==null?void 0:r.data)==null?void 0:t.message)||"加入購物車失敗",snackbarProps:{color:"red"}})}};return P.registerPlugin(D),N(()=>{const o=p.value;P.fromTo(o,{scale:1,y:0},{scale:.5,y:-200,transformOrigin:"top center",scrollTrigger:{trigger:o,start:"top top",end:"bottom top",scrub:!0,pin:!0,pinSpacing:!1}})}),(o,r)=>(i(),h(S,null,[e(xe,{"image-src":oe(Ve),subtitle:"您的每一次消費，都在為毛孩們累積幸福",title:"公益商城"},null,8,["image-src"]),e(U,{class:"announcement-container my-8",fluid:""},{default:a(()=>[e(y,{justify:"center"},{default:a(()=>[e(u,{cols:"12",md:"8"},{default:a(()=>[e(H,{class:"pa-4 announcement-card",elevation:"4"},{default:a(()=>[e(y,{align:"center","no-gutters":""},{default:a(()=>[e(u,{cols:"2",class:"text-center"},{default:a(()=>[e(se,{size:"40",color:"primary"},{default:a(()=>r[5]||(r[5]=[f("mdi-bullhorn",-1)])),_:1,__:[5]})]),_:1}),e(u,{cols:"10"},{default:a(()=>[r[7]||(r[7]=s("h2",{class:"mb-2 text-h4"},"本月公益合作捐贈單位",-1)),r[8]||(r[8]=s("p",null,"在本賣場消費之商品都會捐贈與該月合作單位",-1)),r[9]||(r[9]=s("p",null,"每月合作對象以公告單位為準",-1)),s("p",Te,[r[6]||(r[6]=f(" 💝 本月商品將捐贈給 ",-1)),s("strong",null,n(m.value.name),1)]),s("small",we,n(m.value.description),1)]),_:1,__:[7,8,9]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(U,null,{default:a(()=>[e(y,{align:"center",class:"mb-4"},{default:a(()=>[e(u,{cols:"12",md:"8"},{default:a(()=>[e(le,{modelValue:b.value,"onUpdate:modelValue":[r[0]||(r[0]=t=>b.value=t),r[1]||(r[1]=t=>c.value=1)],mandatory:"","selected-class":"text-primary"},{default:a(()=>[e(M,{filter:"",value:"",variant:"outlined"},{default:a(()=>r[10]||(r[10]=[f(" 全部 ",-1)])),_:1,__:[10]}),(i(),h(S,null,L(W,t=>e(M,{key:t,filter:"",value:t,variant:"outlined"},{default:a(()=>[f(n(t),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(u,{class:"d-flex align-center",cols:"12",md:"4"},{default:a(()=>[e(ne,{modelValue:w.value,"onUpdate:modelValue":[r[2]||(r[2]=t=>w.value=t),r[3]||(r[3]=t=>c.value=1)],class:"mr-2",clearable:"",density:"compact",flat:"","hide-details":"",placeholder:"搜尋商品","prepend-inner-icon":"mdi-magnify",variant:"solo-filled"},null,8,["modelValue"]),e(ie,null,{activator:a(({props:t})=>[e(G,O(t,{icon:"mdi-sort",ripple:!1,variant:"text"}),null,16),f(" "+n($[k.value].text),1)]),default:a(()=>[e(ce,null,{default:a(()=>[(i(),h(S,null,L($,(t,_)=>e(ue,{key:t.text,active:k.value===_,onClick:Ae=>{k.value=_,c.value=1}},{default:a(()=>[e(de,null,{default:a(()=>[f(n(t.text),1)]),_:2},1024)]),_:2},1032,["active","onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{class:"mb-8"}),v.value.length>0?(i(),C(y,{key:0},{default:a(()=>[(i(!0),h(S,null,L(Q.value,t=>(i(),C(u,{key:t._id,cols:"12",lg:"4",md:"6"},{default:a(()=>[e(Pe,O({ref_for:!0},t,{onAddToCart:_=>J(t._id)}),null,16,["onAddToCart"])]),_:2},1024))),128)),e(u,{cols:"12"},{default:a(()=>[e(me,{modelValue:c.value,"onUpdate:modelValue":r[4]||(r[4]=t=>c.value=t),circle:"",length:E.value,"total-visible":5},null,8,["modelValue","length"])]),_:1})]),_:1})):(i(),C(y,{key:1},{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[e(pe,{headline:"噢！找不到商品",icon:"mdi-magnify-remove-outline",text:"試試看更換篩選條件或關鍵字吧！",title:"無符合條件的商品"})]),_:1})]),_:1}))]),_:1})],64))}};typeof R=="function"&&R(K);const Oe=B(K,[["__scopeId","data-v-d7f43b25"]]);export{Oe as default};
