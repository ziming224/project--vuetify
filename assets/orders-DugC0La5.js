import{v as b,j as h,m as w,q as c,o as n,w as e,a as s,P as f,Q as i,C as a,c as p,S as k,E as m,H as S,aw as L,F as g,h as x,at as P,au as E,I as r,av as N,d as T,e as B,aq as I,X as q,W as $,g as C,B as D}from"./index-Ce-VEGu5.js";import{o as j}from"./order-BWxZUdep.js";import{b as v}from"./route-block-B_A1xBdJ.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={key:0,class:"text-center pa-16"},F={class:"font-weight-bold text-mono"},M={class:"font-weight-medium"},O={class:"font-weight-bold text-secondary"},H={class:"text-right"},Q={class:"font-weight-bold text-body-1 mt-1"},R={class:"d-flex justify-end align-center pa-2"},W={class:"text-h6 font-weight-bold text-secondary ml-2"},y={__name:"orders",setup(X){const V=b(),u=h([]);return w(async()=>{try{const{data:d}=await j.getMy();u.value=d.result.map(t=>{const l=t.cart.reduce((o,_)=>o+_.product.price*_.quantity,0);return{...t,totalPrice:l}})}catch(d){console.error("Error fetching orders:",d),V({text:"無法載入訂單資料",snackbarProps:{color:"red"}})}}),(d,t)=>(n(),c(D,{class:"custom-container",fluid:"",style:{"margin-top":"50px","margin-bottom":"50px"}},{default:e(()=>[s(f,null,{default:e(()=>[s(i,{cols:"12"},{default:e(()=>t[0]||(t[0]=[a("h1",{class:"text-h4 font-weight-bold my-4"},"我的訂單",-1)])),_:1,__:[0]}),s(i,{cols:"12"},{default:e(()=>[u.value.length===0?(n(),p("div",A,[s(k,{color:"grey-lighten-1",size:"80"},{default:e(()=>t[1]||(t[1]=[m("mdi-receipt-text-outline",-1)])),_:1,__:[1]}),t[3]||(t[3]=a("h2",{class:"text-h5 my-4"},"您目前沒有任何訂單",-1)),t[4]||(t[4]=a("p",{class:"text-medium-emphasis mb-6"},"快去商城逛逛吧！",-1)),s(S,{color:"primary",to:"/shop"},{default:e(()=>t[2]||(t[2]=[m("前往商城",-1)])),_:1,__:[2]})])):(n(),c(L,{key:1,variant:"accordion"},{default:e(()=>[(n(!0),p(g,null,x(u.value,l=>(n(),c(P,{key:l._id,elevation:"2"},{default:e(()=>[s(E,null,{default:e(()=>[s(f,{align:"center",class:"spacer"},{default:e(()=>[s(i,{cols:"12",md:"4",sm:"5"},{default:e(()=>[t[5]||(t[5]=a("div",{class:"text-caption text-medium-emphasis"},"訂單編號",-1)),a("div",F,r(l._id),1)]),_:2,__:[5]},1024),s(i,{cols:"6",md:"3",sm:"3"},{default:e(()=>[t[6]||(t[6]=a("div",{class:"text-caption text-medium-emphasis"},"下單日期",-1)),a("div",M,r(new Date(l.createdAt).toLocaleDateString()),1)]),_:2,__:[6]},1024),s(i,{cols:"6",md:"3",sm:"3"},{default:e(()=>[t[7]||(t[7]=a("div",{class:"text-caption text-medium-emphasis"},"總金額",-1)),a("div",O," NT$ "+r(l.totalPrice.toLocaleString()),1)]),_:2,__:[7]},1024)]),_:2},1024)]),_:2},1024),s(N,{class:"bg-surface-light"},{default:e(()=>[s(T,{class:"bg-transparent",lines:"two"},{default:e(()=>[(n(!0),p(g,null,x(l.cart,o=>(n(),c(B,{key:o._id,class:"mb-2",title:o.product.name,to:`/product/${o.product._id}`},{prepend:e(()=>[s(q,{class:"mr-4",rounded:"lg",size:"64"},{default:e(()=>[s($,{alt:o.product.name,src:o.product.image},null,8,["alt","src"])]),_:2},1024)]),append:e(()=>[a("div",H,[a("div",null,"x "+r(o.quantity),1),a("div",Q," NT$ "+r((o.product.price*o.quantity).toLocaleString()),1)])]),default:e(()=>[s(I,null,{default:e(()=>[m(" 單價: NT$ "+r(o.product.price.toLocaleString()),1)]),_:2},1024)]),_:2},1032,["title","to"]))),128))]),_:2},1024),s(C,{class:"my-2"}),a("div",R,[t[8]||(t[8]=a("span",{class:"text-h6 font-weight-bold"},"總計：",-1)),a("span",W,"NT$ "+r(l.totalPrice.toLocaleString()),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1}))}};typeof v=="function"&&v(y);const Z=z(y,[["__scopeId","data-v-694f7af8"]]);export{Z as default};
