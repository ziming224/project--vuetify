import{u as b,v as f,j as i,c as w,o as x,C as p,a as t,w as c,a0 as u,H as g,E as y,a2 as F,a1 as U,F as k,N as P}from"./index-Ce-VEGu5.js";const q={class:"text-center"},S={__name:"profile",setup(B){const n=b(),m=f(),r=i(!1),d=i(!1),l=i({account:n.account,email:n.email}),s={required:o=>!!o||"此欄位為必填",email:o=>/.+@.+\..+/.test(o)||"信箱格式不正確"},v=async()=>{var o,e;if(r.value){d.value=!0;try{await P.updateProfile({email:l.value.email}),n.email=l.value.email,m({text:"個人資料更新成功！",snackbarProps:{color:"success",location:"top"}})}catch(a){console.error("更新個人資料失敗",a);const V=((e=(o=a.response)==null?void 0:o.data)==null?void 0:e.message)||"更新失敗，請稍後再試";m({text:V,snackbarProps:{color:"error",location:"top"}})}finally{d.value=!1}}};return(o,e)=>(x(),w(k,null,[e[6]||(e[6]=p("h2",{class:"text-h5 font-weight-bold mb-4"},"個人資料",-1)),t(U,{modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=a=>r.value=a),onSubmit:F(v,["prevent"])},{default:c(()=>[t(u,{modelValue:l.value.account,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.account=a),class:"mb-4",disabled:"",label:"帳號",readonly:"",variant:"outlined"},null,8,["modelValue"]),t(u,{modelValue:l.value.email,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.email=a),class:"mb-4",label:"變更信箱",rules:[s.required,s.email],type:"email",variant:"outlined"},null,8,["modelValue","rules"]),t(u,{modelValue:l.value.password,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.password=a),class:"mb-4",label:"原始密碼",rules:[s.required,s.minLength],type:"password",variant:"outlined"},null,8,["modelValue","rules"]),t(u,{modelValue:l.value.newPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.newPassword=a),class:"mb-4",label:"變更密碼",rules:[s.required,s.minLength],type:"password",variant:"outlined"},null,8,["modelValue","rules"]),p("div",q,[t(g,{color:"tea",disabled:!r.value,loading:d.value,type:"submit"},{default:c(()=>e[5]||(e[5]=[y(" 儲存更新 ",-1)])),_:1,__:[5]},8,["disabled","loading"])])]),_:1},8,["modelValue"])],64))}};export{S as default};
